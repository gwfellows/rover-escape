<!DOCTYPE html>

<html lang="en">

<head>

  <title>Hello, world!</title>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <meta name="description" content="" />
	

</head>

<body>
<style>
canvas {
	border: 1px solid red;

}
</style>
<script>
		function drawCircle(ctx, x, y, radius, fill, stroke, strokeWidth) {
		  ctx.beginPath()
		  ctx.arc(x, y, radius, 0, 2 * Math.PI, false)
		  if (fill) {
			ctx.fillStyle = fill
			ctx.fill()
		  }
		  if (stroke) {
			ctx.lineWidth = strokeWidth
			ctx.strokeStyle = stroke
			ctx.stroke()
		  }
		}
		
		
		player_position = [20,20]
		
		rover_positions = [[400,200],[400,200],[400,200],[400,200],[400,200],[400,200],[400,200],[400,200]]
		
		ctx = null
		
		window.onload = function(){
			 ctx = document.getElementById('c').getContext('2d')
			 ctx.imageSmoothingEnabled = false;
			 ctx.msImageSmoothingEnabled = false;
			ctx.mozImageSmoothingEnabled = false;
			ctx.webkitImageSmoothingEnabled = false;
			ctx.imageSmoothingEnabled = false;
		}
		
	
		
		document.body.addEventListener('keydown', function(e){
			if (e.keyCode == 39){
				player_position[0] += 10
			}
			else if (e.keyCode == 37){
				player_position[0] -= 10
			}
			else if (e.keyCode == 40){
				player_position[1] += 10
			}
			else if (e.keyCode == 38){
				player_position[1] -= 10
			}	
		});
		
		function wipeScreen(){
			ctx.clearRect(0, 0, 800, 400);
		}
		
		function moveRover(){
			rover_positions.push( [((rover_positions[rover_positions.length-1][0]*30+player_position[0])/31+Math.random()*10-5),
			((rover_positions[rover_positions.length-1][1]*30+player_position[1])/31+Math.random()*10-5)] )
			rover_positions.shift()
		}
		
		var rover = new Image();
		rover.src = 'rover1.png';
		
		function m5(number){
			return 5*(Math.floor(Math.abs(number/5)));
		}
		
		setInterval(
			function(){
				wipeScreen();
				moveRover();
				for (pos of rover_positions){
					//drawCircle(ctx, pos[0], pos[1], 30, 'black', 'black', 2);
					 ctx.drawImage(rover, m5(pos[0])-rover.width*5/2, m5(pos[1])-rover.width*5/2, rover.width*5,  rover.height*5 );
				}
				drawCircle(ctx, player_position[0], player_position[1], 10, 'orange', 'orange', 2);
				}
				,1
			);
			
			
	</script>
	<canvas id="c" width="800" height="400"></canvas>
</body>

</html>